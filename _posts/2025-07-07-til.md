---
title: "[TIL] 2025.07.07"
date: 2025-07-07
categories: [TIL]
tags: [TIL, 한국정보교육원, 실습, VLAN, Access Port, Trunk Port]
---

# TIL – 2025-07-07
<!-- 오늘 날짜 -->

---

## 📘 Today I Studied
<!-- 오늘 공부한 강의, 실습, 문서 등 -->
- 한국정보교육원 KT클라우드와 NHN Cloud로 완성하는 클라우드 엔지니어 양성 6일차
- VLAN
- Access Port & Trunk Port
- VTP
- 실습 - Frame Relay Multi Point, L3 스위치에서 멀티 라우팅

---

## ✏️ Key Takeaways
<!-- 오늘 배운 주요 개념, 이론, 흐름 등을 자유롭게 정리하세요 -->

### Frame Relay - Multi Point
![Frame Relay - Multi Point](/assets/posts/250707-3.png)

```text
<R1>
Router(config)#interface s0/0/0
Router(config-if)#ip address 192.168.10.1 255.255.255.0
Router(config-if)#encapsulation frame-relay
Router(config-if)#no shutdown
Router(config-if)#frame-relay map ip 192.168.10.2 102 broadcast
Router(config-if)#frame-relay map ip 192.168.10.3 102 broadcast


<R2> - 중계 라우터
Router(config)#interface s0/0/0
Router(config-if)#encapsulation frame-relay
Router(config-if)#no shutdown
Router(config)#interface s0/0/0.123 multipoint // 123은 임의의 숫자, 멀티 포인트로 사용, 주인터페이스에 해도 되는데 확장성을 위해서 서브인터페이스로 사용
Router(config-subif)#ip address 192.168.10.2 255.255.255.0
Router(config-subif)#frame-relay map ip 192.168.10.1 201 broadcast
Router(config-subif)#frame-relay map ip 192.168.10.3 203 broadcast


<R3>
Router(config)#interface s0/0/0
Router(config-if)#ip address 192.168.10.3 255.255.255.0
Router(config-if)#encapsulation frame-relay
Router(config-if)#no shutdown
Router(config-if)#frame-relay map ip 192.168.10.1 302 broadcast
Router(config-if)#frame-relay map ip 192.168.10.2 302 broadcast
```
- R2 라우터는 중계 라우터로 모든 라우터가 거쳐가는 라우터이다.
- 중계 라우터에서 중계 IP 설정을 서브인터페이스에서 했는데 확장성을 위해서다. 주인터페이스에 바로 해도 동작한다.





### VLAN
- 스위치 연결하면 통신이 되는 이유? 같은 네트워크라서 (같은 VLAN에 속해있어서)
- VLAN 번호는 식별자 (유일무이)
- 명령어는 모델명에 따라가는게 아니라 IOS버전에 따라감
    - L3 스위치에서 trunk할 때 명령어가 L2 스위치 명령어랑 다른 이유는 IOS버전이 달라서
    - L3 스위치에 L2 스위치 IOS 버전 그 버전 명령어 사용

### VLAN에서 Port별 동작

#### Access Port (Untagging Port)
1) PC에서 Switch를 만나기 전에 이더넷 프로토콜
2) 스위치를 만나면 VLAN Tagging을 함 (ex. VLAN 100, VLAN 200 ...) 
3) 태그가 일치하는 애랑만 통신 가능
4) 도착지 PC 포트로 가면 Tag를 뗀다. (untagging) 그래서 Access Port를 Untagging Port라고 함

#### Trunk Port (tagging Port)
1) trunk Port에서는 tag를 떼지 않고 보냄 그래서 trunk Port를 Tagging Port라고 함

### VTP
#### VTP 공유 조건
1) Domain name이 같아야 한다.
2) password가 같아야 한다.
3) VTP 버전

- 실제 VLAN 정보는 flash 메모리에 저장된다.
- 설정 정보는 NVRAM에 저장된다. (비휘발성)

### L3 스위치
- L3 스위치는 서브인터페이스 생성 못함
- IP 넣어서 L3 포트로 쓰면 trunking 못함 => VLAN 사용 못함

#### L3 스위치에서 VLAN 라우팅 사용하는 법
1) ip routing으로 라우팅 활성화 한다.
2) 가상 인터페이스 VLAN 생성 후 gateway 주소를 IP로 넣어준다.

```
Switch(config)#ip routing // Routing 기능 활성화 (다른 네트워크 연결: 라우팅)

// gateway 생성 - 가상 인터페이스 생성 (논리적으로 만듦)
Switch(config)#interface vlan 100
Switch(config-if)#ip address 172.16.10.1 255.255.255.0 // gateway 생성

Switch(config)#interface vlan 200
Switch(config-if)#ip address 172.16.20.1 255.255.255.0 // gateway 생성

```

![L3 스위치](/assets/posts/250707-1.png)


#### 정리
- 스위치에서 포트는 L2포트이거나 L3포트 하나로만 사용한다.
- L3 포트로 사용하면 그 포트에 trunkin은 불가능하다.
- trunking된 포트에는 물리포트 못 지나다닌다.
- 스위치에서 포트는 물리 또는 가상 1개로만 딱 정해서 사용 (보안 이유로)


### 라우터에서 정적 라우팅 설정하기
- 라우터는 라우팅테이블을 참조한다.
- 자기에게 직접 연결된 포트는 자동으로 라우팅테이블에 올라온다.
- 자기가 모르는 네트워크 주소에 대한 요청은 드랍한다.
- 네트워크 통신을 하려면 라우팅테이블에 작성하면 된다.

#### 정적 라우팅
- 엔지니어가 모르는 라우터주소를 정적으로 넣어주는 것

#### 정적 라우팅 설정 방법
- 방법 1. Router(config)#ip route [목적지 네트워크] [다음 라우터 주소(Next Hop)] - 상대측 라우터 주소  
    - ex) Router(config)#ip route 192.168.20.0 255.255.255.0 1.1.12.2  
- 방법 2. Router(config)#ip route [목적지 네트워크] [다음 라우터 인터페이스 번호(Next Hop)] - 나 자신의 출구 인터페이스 번호  


![라우터 라우팅](/assets/posts/250707-2.png)


#### 메모
- 위의 이미지에서 네트워크는 5개
- 모든 네트워크가 양방향 소통이 되려면 라우터는 네트워크 주소 5개가 라우팅테이블에 있어야 한다.
- 라우터는 Trunking Port랑 Access Port 같이 가능 (이미지에는 없지만 추가 실습에서 VLAN도 사용할 때)



--- 
## 🌱 What I Realized
<!-- 오늘 느낀 점, 인사이트, 나만의 정리 -->

- 실습 빡센데 재밌다.
- 실습하면 시간이 잘 간다.
- trunking port랑 access Port의 동작이 switch에서랑 router에서의 차이가 헷갈린다.

---

## 👀 Questions & Next Steps
- 실습 이어서 함
<!-- 내일 할 것, 궁금한 점, 더 찾아볼 개념 등 -->
