---
title: "[TIL] 2025.07.01"
date: 2025-07-01
categories: [TIL]
tags: [TIL, 한국정보교육원, 네트워크, 실습, OSI 7 Layer, IPv4, 서브네팅]
---

# TIL – 2025-07-01
<!-- 오늘 날짜 -->

---

## 📘 Today I Studied
<!-- 오늘 공부한 강의, 실습, 문서 등 -->
- 한국정보교육원 KT클라우드와 NHN Cloud로 완성하는 클라우드 엔지니어 양성 2일차
- 라우터와 IP address & MAC address
- OSI 7 Layer 정리 - 식별자, 장비, 단위
- 데이터를 보낼 때 단위로 포장함 > 캡슐화
- Emcapsulation(캡슐화)와 (Decapsulation)역캡슐화
- IPv4 구조
- 엔지니어가 설계할 IP Addressing을 위해서 필요한 것 - 1. IP address, 2. Subnetmask, 3. gateway
- 서브네팅
- 실습 ping 보내기


---

## ✏️ Key Takeaways
<!-- 오늘 배운 주요 개념, 이론, 흐름 등을 자유롭게 정리하세요 -->

### 라우터
- 로컬 (시스템 안)
- 라우터 : 현관 역할 (안과 밖의 관문) => 연결해주는 역할 => 네트워크를 연결해주는 역할
- 나가는 통로가 필요하다? 라우터가 존재 = 라우터로 연결된 것은 gateway가 존재한다.
- MAC address와 IP address 둘 다 받는 주소, 주는 주소가 존재한다.  
```text
R ------- R  
|         |  
SW        SW  
|  \      | \  
PC PC     PC PC  
```
- 위 구조에서 네트워크는 3개
- 길 안내를 위해서는 식별자(IP address)가 필요하다.
- 데이터를 주고 받기 위해서는 최소 2계층까지는 있어야 한다.
- Switch는 L2 Switch를 의미한다.
- L3 Switch는 Switch? 아님 라우터임
- 주소를 찾아가서 무슨 서비스를 제공할지 아는 법? Port(4계층): 서비스 식별자


#### OSI 7 Layer
- 스위치(2층)은 Only MAC address, 라우터(3층)은 MAC address와 IP address
- 3층 1,2층도 수행할 수 있다.
- OSI 7계층에서 아래로 내려갈 수록 하드웨어와 가깝고, 올라갈수록 소프트웨어와 가깝다.
- 5,6,7층은 소프트웨어 영역


| 계층 번호 | 계층 이름            | 예시 / 장비      | 주소 / 식별자 | 데이터 단위  |
|-----------|----------------------|------------------|----------------|---------------|
| 7         | 응용 계층 (Application) | HTTP             | -              | Message       |
| 6         | 표현 계층 (Presentation) | -               | -              |               |
| 5         | 세션 계층 (Session)     | -               | -              |               |
| 4         | 전송 계층 (Transport)   | 서버, 클라이언트 식별<br>Port | Port         | Segment       |
| 3         | 네트워크 계층 (Network) | Router           | IP 주소        | Packet        |
| 2         | 데이터 링크 계층 (Data Link) | Switch      | MAC 주소       | Frame         |
| 1         | 물리 계층 (Physical)     | -               | -              |               |

---

- 응용 프로그램이 만드는 데이터 = **Message**
- 전송 계층에서 분리되는 단위 = **Segment**
- 네트워크 계층 = **Router**, 식별자는 **IP**
- 데이터 링크 계층 = **Switch**, 식별자는 **MAC**
- MAC은 물리적 주소, IP는 논리적 주소
- 포트(Port)는 서버/클라이언트 식별용
- 데이터를 보낼 때는 단위로 포장함 (캡슐화)
- 데이터를 전송할 때 길은 최소 2계층까지 필요하다. 길이 갈래가 나누어질 때 맞는 길을 알려주는 존재 Router


#### Emcapsulation(캡슐화)와 (Decapsulation)역캡슐화
##### Encapsulation (캡슐화 - 송신 측)

| 계층        | 데이터 구성                                 | 설명                                                         |
|-------------|---------------------------------------------|--------------------------------------------------------------|
| Application | Message (M)                                 | 사용자 데이터 (웹 요청, 채팅 메시지 등)                      |
| Transport   | Transport Header + Message (TH + M)         | TCP/UDP 헤더가 추가되어 세그먼트(Segment) 생성               |
| Network     | Network Header + Transport Header + Message (NH + TH + M) | IP 헤더 추가 → 패킷(Packet) 형성                     |
| Data Link   | Data Link Header + Network Header + Transport Header + Message (DLH + NH + TH + M) | MAC 주소 등 포함 → 프레임(Frame) 형성 |
| Physical    | 전기/광 신호로 변환                         | 비트 단위로 전송됨                                           

---

##### Decapsulation (역캡슐화 - 수신 측)

| 계층        | 처리 내용                                     | 설명                                                        |
|-------------|----------------------------------------------|-------------------------------------------------------------|
| Application | 메시지를 처리                                 | 최종적으로 사용자 애플리케이션에서 데이터 확인              
| Transport   | Transport Header 제거                         | 세그먼트 → 메시지                                            |
| Physical    | 신호 수신                                     | 전기/광 신호를 수신해 비트로 변환                          |
| Data Link   | Data Link Header 제거                         | 프레임 → 패킷                                                |
| Network     | Network Header 제거                           | 패킷 → 세그먼트                                              |

---



- **TH**: Transport Header (TCP/UDP)
- **NH**: Network Header (IP)
- **DLH**: Data Link Header (MAC 주소 등)
- 캡슐화란? 위에서 아래로 헤더를 계속 붙이는 과정
- 역캡슐화란? 아래에서 위로 헤더를 제거하며 데이터 해석
- Transport 계층의 식별자 port는 역캡슐화 과정에서 끝까지 살아서 간다.
- **데이터를 전송하는 과정에서 캡슐화와 역캡슐화가 여러번 진행된다.**
- PC에서 SW를 거쳐서 R까지 보낼때 캡슐화해서 MAC address를 사용
- R 도착해서 MAC address를 IP address로 역캡슐화 이것을 다른 라우터로 보내기 위해서 다시 캡슐화...


##### 정리

| 계층 | 계층 이름       | 기능                                  | 장비                    | 프로토콜 (TCP/UDP 포함)                     | 포트 번호                              | 데이터 단위     |
|------|----------------|----------------------------------------|-------------------------|----------------------------------------------|-----------------------------------------|-----------------|
| 7    | Application    | 응용프로그램                           | Ln Switch               | SSH, Telnet, HTTP, SMTP, POP3, IMAP, DNS, TFTP, SNMP, DHCP | 22, 23, 80, 25, 110, 143, 53, 69, 161, 162, 67, 68 | Message         |
| 6    | Presentation   | 데이터 표현, 압축                      |                         |                                              |                                         | Message         |
| 5    | Session        | 패킷제어                               |                         |                                              |                                         | Message         |
| 4    | Transport      | 오류제어, 흐름제어, 다중화, End to End | L4 Switch               | TCP, UDP                                     |                                         | Segment         |
| 3    | Network        | 경로 결정                              | Router, L3 Switch       | IP, ICMP, IGMP, ARP, RARP                    |                                         | Packet          |
| 2    | Data Link      | 프레임화, 오류제어, 흐름제어, Point to Point | Switch (Bridge)         | Ethernet, LLC, PPP, GR, L2F, L2TP            |                                         | Frame           |
| 1    | Physical       | 전기적, 기계적, 기능적, 절차적 특성     | NIC, Repeater, Hub      |                                              |                                         | Bit             |

#### IPv4
- Classful (계층화)

| 클래스 | 시작 IP 범위 | 비고            |
|--------|---------------|-----------------|
| A      | 0 ~ 126        | 127은 제외       |
| B      | 128 ~ 191      |                 |
| C      | 192 ~ 223      |                 |
| D      | 224 ~ 239      | 멀티캐스트 용도  |
| E      | 240 ~ 255      | 실험적 용도      |

- 구조 : 네트워크 주소 + 호스트 주소
- 옥텟 : 4
- 비트수/필드 : 8비트
- 표기법 : 10진수
- 구분자 : .
- 크기 : 32비트 (4바이트)
- 개수 : 약 43억

- 엔지니어가 설계하는 IP Addressing을 위해서 필요한것
    1. IP 주소
    2. Subnetmask
    3. gateway 

---

#### Subnet Mask
- 목적 1. 네트워크 차단용 : 브로드캐스트가 상대 네트워크로 넘어가지 못하도록 막아주는 역할 (그러니까 네트워크가 나눠짐)
- 목적 2. **IP address에서 어디까지가 네트워크 주소인지 판단해주는 역할**

| 클래스 | 시작 IP 범위   | Default Subnet Mask    | 용도            | Private IP로 사용 부분                              |
|--------|----------------|------------------------|------------------|-----------------------------------------------|
| A      | 0 ~ 126         | 255.0.0.0              | 대규모 네트워크   | 10.0.0.0 ~ 10.255.255.255                      |
| B      | 128 ~ 191       | 255.255.0.0            | 중규모 네트워크   | 172.16.0.0 ~ 172.31.255.255                    |
| C      | 192 ~ 223       | 255.255.255.0          | 소규모 네트워크   | 192.168.0.0 ~ 192.168.255.255                  |
| D      | 224 ~ 239       | -                      | 멀티캐스트용      | -                                             |
| E      | 240 ~ 255       | -                      | 실험적 용도       | -                                             |

- 라우터는 AND(곱하기) 연산으로 주소를 구분한다 (IP address) AND (Subnet Mask)

ex) 192.168.10.0 AND 255.255.255.0  

11000000 10101000 00001010 00000000  
11111111 11111111 11111111 00000000  
=> 네트워크 주소 부분만 1로 AND연산으로 남는다.  

네트워크 주소: 192.168.10.0/24  
S/M: 255.255.255.0  

- 사용할 수 있는 호스트 주소는 1 ~ 254까지
- 이유는 호스트 주소 중 맨 앞(위의 경우 0)은 시스템이 네트워크 주소용으로 맨 뒤(위의 경우 255)는 브로드캐스트 용으로 사용한다.
- 라우터를 사용할 경우에는 KT의 경우 남은 호스트 주소(1 ~ 254)중에 제일 앞을 사용한다.
- 즉 가용 주소에서 네트워크주소, 브로드캐스트주소, 라우터 주소는 3개 빠짐 (PC에 부여할 수 있는 주소에서 -3)

#### 서브네팅
- 클래스 단위로 IP address를 나눠서 줄 경우 낭비가 발생한다.
- 예를 들어 요청한 주소는 10개인데 C 클래스를 부여할 경우 256개를 넘겨주면서 200개 넘게 남는다 (낭비)
- 그래서 호스트 주소의 비트를 더 써서 IP address를 나눠서 다른 네트워크에도 부여할 수 있게 해주는 것이 서브네팅

| 비트 위치 | 1비트 | 2비트 | 3비트 | 4비트 | 5비트 | 6비트 | 7비트 | 8비트 |
|-----------|-------|-------|-------|-------|-------|-------|-------|-------|
| 값        | 128   | 64    | 32    | 16    | 8     | 4     | 2     | 1     |

- 만약 2개의 서브네팅으로 나눈다면?
- 앞의 1비트를 더 사용한다. (S/M = 255.255.255.128) 사용한 비트수: 25개
- 그럼 호스트주소 128개씩 부여 가능
- 만약 4개로 나누려면? 2비트를 더 사용한다. (S/M 255.255.255.192) 사용한 비트수: 26개

##### 예제 문제
- 만약 8개로 나눈다고 할 때 192.168.10.111/27 주소에서
1. 서브네팅 하나당 IP 부여 수: 32개씩
2. 십진수 S/M: 225.225.225.224
3. Router 주소: 97
4. 네트워크/브로드캐스트 주소: 96/127

---

### 실습

- PC끼리 연결할 때 스위치없이 바로 Cross-over cable로 바로 연결 가능

실습에서 사용하는 것

| 장비 종류 | 계층 | 모델명 |
|-----------|------|--------|
| 라우터     | -    | 2811   |
| 스위치     | L2   | 2960   |
| 스위치     | L3   | 3560   |


#### 명령어 정리

##### ping
- 네트워크 연결 상태 확인 
- 명령어 : ping [대상 호스트 IP 주소/도메인 이름]
- ex) ping 192.168.10.3
- 만약 없는 주소로 요청하면? Request timed out.
- TTL : Time to Live 라우터 거치면 1개씩 깎임
    - TTL 왜 필요? 주소가 잘못된 ping을 보낼 경우? 계속 떠돌게됨
    - TTL로 라우터를 몇 개 거친건지 알 수 있음
    - TTL이 0이 되면 라우터가 폐기시켜버림

##### traceart
- 경로 추적할 수 있음 (어느 라우터를 거쳤는지 같은)
- 명령어 : tracert [목적지 IP 주소/도메인 이름]
- ex) tracert google.com


--- 

## 🌱 What I Realized
<!-- 오늘 느낀 점, 인사이트, 나만의 정리 -->
- 서브네팅 계산하는거 재밌다.
- L3 스위치는 3계층에 있는거지 라우터가 아님

---

## 👀 Questions & Next Steps
- Packet Tracer 이어서 실습
<!-- 내일 할 것, 궁금한 점, 더 찾아볼 개념 등 -->
