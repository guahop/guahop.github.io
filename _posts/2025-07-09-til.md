---
title: "[TIL] 2025.07.09"
date: 2025-07-09
categories: [TIL]
tags: [TIL, í•œêµ­ì •ë³´êµìœ¡ì›, ì‹¤ìŠµ, ë¼ìš°íŒ…, ë§¤íŠ¸ë¦­, NAT, PAT]
---

# TIL â€“ 2025-07-09
<!-- ì˜¤ëŠ˜ ë‚ ì§œ -->

---

## ğŸ“˜ Today I Studied
<!-- ì˜¤ëŠ˜ ê³µë¶€í•œ ê°•ì˜, ì‹¤ìŠµ, ë¬¸ì„œ ë“± -->
- í•œêµ­ì •ë³´êµìœ¡ì› KTí´ë¼ìš°ë“œì™€ NHN Cloudë¡œ ì™„ì„±í•˜ëŠ” í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ ì–‘ì„± 8ì¼ì°¨
- ë¼ìš°íŒ…, DHCP(ë™ì  ì£¼ì†Œ í• ë‹¹)
- NAT, PAT
- ì‹¤ìŠµ - ë¼ìš°íŒ…, NAT, PAT

---

## âœï¸ Key Takeaways
<!-- ì˜¤ëŠ˜ ë°°ìš´ ì£¼ìš” ê°œë…, ì´ë¡ , íë¦„ ë“±ì„ ììœ ë¡­ê²Œ ì •ë¦¬í•˜ì„¸ìš” -->

### ë¼ìš°íŒ…ê³¼ DHCP
![ë¼ìš°íŒ…](/assets/posts/250709-1.png)
- L3 Switchë¡œ ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸ëŠ” ë¼ìš°í„°ë¡œ ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
- ìƒí™©ì„ í™•ì¸í•˜ê³  ë¼ìš°íŒ…ì„ ì•ˆí•  ì• ë¥¼ ì„ íƒí•´ì•¼ í•œë‹¤.
- L3 Switchì—ì„œ trunkingì„ í•˜ë©´ ë¬¼ë¦¬ IPì˜ ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì„¤ì • ëª»í•˜ê³  IPë¥¼ ì¶”ê°€í•˜ë©´ trunkingì„ ëª»í•œë‹¤.


### ë©”íŠ¸ë¦­ (Routing Metric)
![ë§¤íŠ¸ë¦­](/assets/posts/250709-3.png)


```
            [R2]
           /    \
        â‘ /       \ 
        /          \
     [R1]----------[R3]
      |     â‘¡       |
     [PC_A]       [PC_B]

```


- ì—¬ëŸ¬ ê²½ë¡œ ì¤‘ ìš°ì„  ìˆœìœ„ë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” ê²ƒ
- ë©”íŠ¸ë¦­ ê°’ì´ ë‚®ì€ ê²ƒì´ ìš°ì„  ìˆœìœ„ê°€ ë†’ë‹¤.
- ë„ì°©ì§€ê°€ ê°™ì€ ê²½ë¡œê°€ ì—¬ëŸ¬ ê°œ ìˆì–´ë„ ë©”íŠ¸ë¦­ ê°’ì´ ê°€ì¥ ë‚®ì€ ê°’ë§Œ ë¼ìš°íŒ… í…Œì´ë¸”ì— ì˜¬ë¼ê°„ë‹¤.
- ë§Œì•½ ê°€ì¥ ë‚®ì€ ë©”íŠ¸ë¦­ ê°’ì´ ë™ì¼í•˜ê²Œ ì—¬ëŸ¬ ê°œ ìˆìœ¼ë©´ ë™ì‹œì— ì˜¬ë¼ê°€ê³  ì—¬ëŸ¬ ê°œì˜ ê²½ë¡œë¥¼ ë¡œë“œë°¸ëŸ°ì‹±ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
- ê²½ë¡œê°€ ì—¬ëŸ¬ ê°œê°€ ìˆê³  ë‹¤ ë‹¤ë¥´ê²Œ ë©”íŠ¸ë¦­ ê°’ì„ ë„£ì–´ì£¼ë©´ ë¼ìš°íŒ… í…Œì´ë¸”ì— ì˜¬ë¼ê°„ ìµœì ì˜ ê²½ë¡œê°€ ë‹¤ìš´ë˜ì—ˆì„ ë•Œ ê·¸ ë‹¤ìŒìœ¼ë¡œ ë‚®ì€ ë©”íŠ¸ë¦­ ê°’ì„ ê°€ì§„ ê²½ë¡œê°€ ë¼ìš°íŒ… í…Œì´ë¸”ì— ì˜¬ë¼ê°„ë‹¤.
- ì‹¤ë¬´ì—ì„œ ë©”íŠ¸ë¦­ì€ ì–‘ìª½ ë¼ìš°í„°ì— ë™ì¼í•˜ê²Œ ë„£ì–´ì¤˜ì•¼ í•œë‹¤. (ì„¤ê³„ì— ë§ê²Œ ë™ì‘í•˜ê¸° ìœ„í•´ì„œ)
- ê·¸ë˜ì„œ ìœ„ì˜ ì˜ˆì œì—ì„œ 2ë²ˆ ê²½ë¡œì˜ ë©”íŠ¸ë¦­ì„ 0, 1ë²ˆ ê²½ë¡œì˜ ë©”íŠ¸ë¦­ì„ 1ì„ ë„£ì–´ì£¼ë©´ ë¼ìš°íŒ… í…Œì´ë¸”ì—ëŠ” 2ë²ˆ ê²½ë¡œë§Œ ì˜¬ë¼ê°€ê³  í†µì‹ í•  ë•ŒëŠ” ë¼ìš°íŒ…í…Œì´ë¸”ì— ì˜¬ë¼ì˜¨ ì •ë³´ë¡œë§Œ í†µì‹ í•œë‹¤.

#### ë¼ìš°íŒ… í…Œì´ë¸” ìƒì„¸ ì •ë³´ ë³´ëŠ” ë²•
```S 192.168.20.0/24 [1/0] via 1.1.12.2```

- S(ë¼ìš°íŒ… í”„ë¡œí† ì½œ ì¢…ë¥˜) 
- 192.168.20.0/24(ëª©ì ì§€ ë„¤íŠ¸ì›Œí¬) 
- [1(ê´€ë¦¬ ê±°ë¦¬/AD)/0(ë©”íŠ¸ë¦­)] 
- via 1.1.12.2 (Next Hop)


### NAT
![NAT](/assets/posts/250709-2.png)

```
   [R1] ---- [R2]
    |
   [SW]
  /    \
[PC]   [PC]

```
- ì‚¬ì„¤ IPì™€ ê³µì¸ IPë¥¼ ë¼ìš°íŒ… í•´ì£¼ëŠ” ê¸°ìˆ 
- ë¼ìš°íŒ…ê³¼ ì°¨ì´ëŠ” ë¼ìš°íŒ…ì€ ê³µì¸ IPì™€ ê³µì¸ IPë¥¼ ë¼ìš°íŒ…í•˜ê³  NATëŠ” ì‚¬ì„¤ IPì™€ ê³µì¸ IPë¥¼ ë¼ìš°íŒ… í•œë‹¤ëŠ” ì ì´ë‹¤.
- ì•ˆìª½(PC)ì—ì„œëŠ” ë°”ê¹¥(R2)ë¡œ ë¼ìš°íŒ…ì´ ê°€ëŠ¥í•œë° ë°”ê¹¥ì—ì„œ ì•ˆìª½ìœ¼ë¡œëŠ” ë¼ìš°íŒ…ì´ ì•ˆëœë‹¤. (ë°©í™”ë²½ ê¸°ëŠ¥)

#### Static NAT
- ì§ì ‘ ì‚¬ì„¤ IPì™€ ê³µì¸ IPë¥¼ ë§µí•‘ í•´ì£¼ëŠ” ë°©ë²•
- ê·¸ë˜ì„œ PCë¥¼ ê»ë‹¤ê°€ ì¼œë„ ê³µì¸ IPì£¼ì†Œê°€ ê³ ì •

##### ë°©ë²•
1) NAT IP ë“±ë¡ (NAT í•  ì‚¬ì„¤ IPë‘ ê³µì¸ IPë¥¼ ë“±ë¡)   
2) ì‚¬ì„¤ IP í¬íŠ¸ NAT inside ì§€ì •   
3) ë°”ê¹¥ìœ¼ë¡œ ë‚˜ê°€ëŠ” í¬íŠ¸ NAT outsideë¡œ ì§€ì •   

```
Router(config)#ip nat inside source static 192.168.10.2 1.1.12.3
Router(config)#int fa0/0
Router(config-if)#ip nat inside
Router(config-if)#int s0/0/0
Router(config-if)#ip nat outside 
```

#### Dynamic NAT
- ì•Œì•„ì„œ ì‚¬ì„¤ IPë¥¼ ê³µì¸ IPë¡œ ë§µí•‘ í•´ì£¼ëŠ” ë°©ë²•
- PCfë¥¼ ê»ë‹¤ê°€ ì¼œë©´ ë§µí•‘ëœ ê³µì¸ IP ì£¼ì†Œê°€ ë°”ë€” ìˆ˜ ìˆë‹¤.

##### ë°©ë²•
1) ì‚¬ìš©í•œ ê³µì¸ IP pool ìƒì„±
2) ì‚¬ì„¤ IP Pool ìƒì„± (listì— ë„£ìŒ, wildcard maskë¡œ ë²”ìœ„ ì§€ì •)
3) ê³µì¸ IP poolì´ë‘ ì‚¬ì„¤ IP Poolì´ë‘ ë§µí•‘
4) inside port, outside port ì¸í„°í˜ì´ìŠ¤ì— ê°ê° ì§€ì •

```
Router(config)#ip nat pool cisco 1.1.12.3 1.1.12.254 netmask 255.255.255.0
Router(config)#access-list 1 permit 192.168.10.0 0.0.0.255 (ì™€ì¼ë“œ ì¹´ë“œ ë§ˆìŠ¤í¬ > ì‚¬ìš©í•  ê°œìˆ˜ ì§€ì •)
Router(config)#ip nat inside source list 1 pool cisco

Router(config)#int fa0/0
Router(config-if)#ip nat inside
Router(config-if)#int s0/0/0
Router(config-if)#ip nat outside 
```

### PAT
- ê³µì¸ IP ê°œìˆ˜ê°€ ë¶€ì¡±í•´ë„ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ê¸°ìˆ 
- 1ê°œì˜ ê³µì¸ IPë¡œ ì—¬ëŸ¬ ê°œì˜ ì‚¬ì„¤ IPê°€ ì‚¬ìš© ê°€ëŠ¥
- ê³µì¸ IPë¥¼ í•˜ë‚˜ë§Œ ì‚¬ìš©í•´ì„œ IPê°€ ë™ì¼í•˜ê²Œ ë¶€ì—¬ë¼ë„ í¬íŠ¸ë²ˆí˜¸ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
- ë°©ë²•ì€ NAT ë§µí•‘í•  ë•Œ ëì— overloadë§Œ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.

```
Router(config)#ip nat pool cisco 1.1.12.3 1.1.12.3 netmask 255.255.255.0 // ë”± 1ê°œë§Œ ê³µì¸IPë¡œ ì‚¬ìš©
Router(config)#access-list 1 permit 192.168.10.0 0.0.0.255
Router(config)#ip nat inside source list 1 pool cisco overload

Router(config)#int fa0/0
Router(config-if)#ip nat inside
Router(config-if)#int s0/0/0
Router(config-if)#ip nat outside 

```




--- 
## ğŸŒ± What I Realized
<!-- ì˜¤ëŠ˜ ëŠë‚€ ì , ì¸ì‚¬ì´íŠ¸, ë‚˜ë§Œì˜ ì •ë¦¬ -->
- ì‹¤ìŠµ ì¬ë°ŒëŠ”ë° ì¤‘ê°„ì— ë¼ìš°íŒ… ì•ˆë˜ì–´ì„œ ë‹¹í™©í–ˆë‹¤.
- ë¼ìš°íŒ… ì´í•´í•œ ê²ƒ ê°™ì€ë° í•œë²ˆì”© ì•ˆë˜ëŠ” ì´ìœ ë¥¼ ì˜ ëª¨ë¥´ê² ë‹¤.

---

## ğŸ‘€ Questions & Next Steps
- ì‹¤ìŠµ ì´ì–´ì„œ í•¨
<!-- ë‚´ì¼ í•  ê²ƒ, ê¶ê¸ˆí•œ ì , ë” ì°¾ì•„ë³¼ ê°œë… ë“± -->
